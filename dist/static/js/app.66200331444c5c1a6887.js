webpackJsonp([1],{NHnr:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=i("7+uW"),n=new a.a,s={name:"headNav",data:()=>({isTestNet:!0}),props:["title"],mounted(){n.$on("flag",t=>{this.LoginFlag=t})},methods:{ChangeNetFun:function(){!0===this.isTestNet?this.isTestNet=!1:this.isTestNet=!0,n.$emit("ChangeNetFun",this.isTestNet)}}},o={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("nav",{staticClass:"navbar"},[i("div",{staticClass:"container-fluid"},[t.isTestNet?i("h1",[i("span",{staticClass:"glyphicon glyphicon-shopping-cart",attrs:{"aria-hidden":"true"}}),t._v(t._s(t.title)+" For Test Network")]):t._e(),t._v(" "),t.isTestNet?t._e():i("h1",[i("span",{staticClass:"glyphicon glyphicon-shopping-cart",attrs:{"aria-hidden":"true"}}),t._v(t._s(t.title)+" For Main Network")]),t._v(" "),t.isTestNet?i("span",{staticClass:"label label-default",staticStyle:{"font-size":"17px",margin:"8px",float:"right",cursor:"pointer"},on:{click:function(e){t.ChangeNetFun()}}},[t._v("Main Network")]):t._e(),t._v(" "),t.isTestNet?t._e():i("span",{staticClass:"label label-default",staticStyle:{"font-size":"17px",margin:"8px",float:"right",cursor:"pointer"},on:{click:function(e){t.ChangeNetFun()}}},[t._v("Test Network")])])])},staticRenderFns:[]};var c=i("VU/8")(s,o,!1,function(t){i("yiKz")},"data-v-0073c9e2",null).exports,r=i("f3u+"),l=i.n(r);a.a.use(l.a);var d={name:"index",data:()=>({IpPort:"47.97.223.57",Url:"02be2cd38375dae1f5541deb2ca6525c7fdf123b3553346e922d3a8c12b5a22771",isTestNet:!0,CommodityItem:[{name:"Cucumber",price:.1,img:"static/img/cucumber.png",origin:"China",weight:"500g",quantity:0},{name:"Pizza",price:.2,img:"static/img/pizza.jpg",origin:"United States",weight:"1kg",quantity:0},{name:"Cherry",price:.3,img:"static/img/cherry.jpg",origin:"Chile",weight:"200g",quantity:0}],activeDetail:{},Amount:0,Description:"",WalletInfo:{PrivateKey:"",PublicKey:"",ScriptHash:"",Address:"Login in to transfer",Balance:0},InstantKey:"",PaymentLink:"",PaymentQRCode:"",Peer:"",PeerQRCode:"",PaymentList:{},Websock:null,LoginFlag:!1}),props:["title"],filters:{FormatNo:function(t){return t+1},FormatPrice:function(t){return t?t.toFixed(2)+"TNC":"0TNC"}},watch:{CommodityItem:{handler:function(t){this.CalcTotalmoney()},deep:!0},WalletInfo:{handler:function(t){this.GetAssetsBalance()},deep:!0}},mounted(){this.$nextTick(function(){var t=this;setTimeout(function(){t.CreateKey(),t.initWebSocket()},1500)}),n.$on("ChangeNetFun",t=>{!0===t?(console.log("切换到测试网"),this.isTestNet=!0,this.IpPort="47.97.223.57",this.Url="02be2cd38375dae1f5541deb2ca6525c7fdf123b3553346e922d3a8c12b5a22771",this.initWebSocket()):!1===t&&(console.log("切换到主网"),this.isTestNet=!1,this.IpPort="39.105.117.43",this.Url="035395b3fcd2f89b096aac03f53bfc5f7af94b50093a41b840ddd6b3cf563340f2",this.initWebSocket())})},methods:{CommodityDetails:function(t){this.activeDetail=t},FormatCommodityItem:function(t){let e=[];return t.forEach(function(t,i){t.quantity>0&&e.push(t)}),e},CreateKey:function(){let t=ab2hexstring(generatePrivateKey()),e=ab2hexstring(getPublicKey(t,0));this.InstantKey=getPublicKeyEncoded(e)},ChangeQuantity:function(t,e){e>0?t.quantity++:t.quantity<1?t.quantity=0:t.quantity--},DetailsChangeQuantity:function(){let t=this;t.CommodityItem.forEach(function(e,i){e.name===t.activeDetail.name&&e.quantity++}),$(".closeDetails").click()},ClearQuantity:function(t){t.quantity=0},CalcTotalmoney:function(){let t=this;this.Amount=0,this.CommodityItem.forEach(function(e,i){t.Amount+=e.price*e.quantity})},copyfun:function(){var t=new ClipboardJS(".btncopy");t.on("success",function(t){t.clearSelection()}),t.on("error",function(t){console.error("Action:",t.action),console.error("Trigger:",t.trigger)})},copyfun1:function(){var t=new ClipboardJS(".btncopy1");t.on("success",function(t){t.clearSelection()}),t.on("error",function(t){console.error("Action:",t.action),console.error("Trigger:",t.trigger)})},threadPoxiForTxid(){if(this.WebsockForTxid.readyState===this.WebsockForTxid.OPEN)(t=this).WebsocketSendForTxid(agentData);else if(this.WebsockForTxid.readyState===this.WebsockForTxid.CONNECTING){var t=this;setTimeout(function(){t.WebsocketSendForTxid(agentData)},300)}else{this.initWebSocketForTxid();t=this;setTimeout(function(){t.WebsocketSend(agentData)},500)}},initWebSocket(){const t="ws://"+this.IpPort+":8766";this.Websock=new WebSocket(t),this.Websock.onmessage=this.WebsocketOnmessage,this.Websock.onclose=this.WebsocketClose},WebsocketOnmessage(t){const e=JSON.parse(t.data),i=e.MessageType;if(console.log(e),"PaymentLinkAck"==i){this.PaymentLink=e.MessageBody.PaymentLink;const t=e.MessageBody.PaymentLink.substring(2);let i=base58decode(t).toString();console.log(i);let n=i.split("&");this.Peer=n[0];var a={Hr:n[1],Description:n[4]};this.PaymentList={},this.PaymentList=a}"PaymentAck"==i&&"Success"==e.MessageBody.State&&this.PaymentList.Hr==e.MessageBody.Hr&&($(".closePaymentLink").click(),swal({title:"Success",type:"success",confirmButtonText:"Close",allowOutsideClick:"ture"}))},WebsocketSend:function(){console.log("发送信息：1"),this.Websock.send("1")},CreatePaymentLink:function(){let t=this;t.Description=this.title+":",t.CommodityItem.forEach(function(e,i){if(e.quantity>0){let i=e.name+"*"+e.quantity+";";t.Description+=i}});var e={MessageType:"PaymentLink",Sender:t.InstantKey+"@"+t.IpPort+":8766",Receiver:t.Url+"@"+t.IpPort+":8089",MessageBody:{Parameter:{Amount:t.Amount,Assets:"TNC",Description:t.Description}}};console.log(JSON.stringify(e)),t.Websock.send(JSON.stringify(e)),t.Description=""},WebsocketClose(t){console.log("连接关闭:"+t.code)}}},u={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"container"},[i("div",{staticClass:"row mt-5"},[i("div",{staticClass:"col-md-1 col-lg-2 col-xl-3"}),t._v(" "),i("div",{staticClass:"col-md-10 col-lg-8 col-xl-6 main-column"},[t._m(0),t._v(" "),t._l(t.CommodityItem,function(e,a){return i("div",{key:a,staticClass:"col-sm-6 col-md-4",staticStyle:{"margin-top":"20px"}},[i("div",{staticClass:"thumbnail"},[i("img",{attrs:{src:e.img}}),t._v(" "),i("div",{staticClass:"caption"},[i("h3",[t._v(t._s(e.name))]),t._v(" "),i("p",[i("a",{staticClass:"btn btn-primary",attrs:{role:"button"},on:{click:function(i){t.ChangeQuantity(e,1)}}},[t._v(t._s(t._f("FormatPrice")(e.price)))]),t._v(" "),i("a",{staticClass:"btn btn-default",attrs:{role:"button","data-toggle":"modal","data-target":"#Details"},on:{click:function(i){t.CommodityDetails(e)}}},[t._v("Details")])])])])])}),t._v(" "),i("div",{staticClass:"col-md-12 col-lg-12 col-xl-12",staticStyle:{"margin-top":"10px"}},[i("div",{staticClass:"well"},[t._v("\n            Shopping Cart\n          ")]),t._v(" "),0!==t.Amount?i("table",{staticClass:"table table-striped table-hover"},[t._m(1),t._v(" "),t._l(t.FormatCommodityItem(t.CommodityItem),function(e,a){return i("tbody",{key:a},[i("tr",[i("td",[t._v(t._s(t._f("FormatNo")(a)))]),t._v(" "),i("td",[t._v(t._s(e.name))]),t._v(" "),i("td",[i("a",{on:{click:function(i){t.ChangeQuantity(e,-1)}}},[t._v(" - ")]),t._v(t._s(e.quantity)),i("a",{on:{click:function(i){t.ChangeQuantity(e,1)}}},[t._v(" + ")])]),t._v(" "),i("td",[t._v(t._s(t._f("FormatPrice")(e.price*e.quantity)))]),t._v(" "),i("td",[i("span",{staticClass:"glyphicon glyphicon-trash",attrs:{"aria-hidden":"true"},on:{click:function(i){t.ClearQuantity(e)}}})])])])})],2):t._e(),t._v(" "),t._m(2),t._v(" "),0!==t.Amount?i("div",{staticClass:"text-right col-md-12 col-lg-12 col-xl-12",staticStyle:{height:"44px",padding:"5px 0"}},[t._v("Amount: "+t._s(t._f("FormatPrice")(t.Amount))+"   "),i("button",{staticClass:"btn btn-primary",attrs:{"data-toggle":"modal","data-target":"#PaymentLinkForm",type:"button"},on:{click:function(e){t.CreatePaymentLink()}}},[t._v("Payment")])]):t._e()])],2),t._v(" "),i("div",{staticClass:"col-md-1 col-lg-2 col-xl-3"}),t._v(" "),i("div",{staticClass:"modal fade",attrs:{id:"Details",tabindex:"-1",role:"dialog"}},[i("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[i("div",{staticClass:"modal-content"},[i("div",{staticClass:"modal-body clearfloat"},[t._m(3),t._v(" "),i("img",{attrs:{src:t.activeDetail.img}}),t._v(" "),i("h2",[t._v(t._s(t.activeDetail.name))]),t._v(" "),i("p",[t._v("Net Weight: "+t._s(t.activeDetail.weight))]),t._v(" "),i("p",[t._v("Price: "+t._s(t._f("FormatPrice")(t.activeDetail.price)))]),t._v(" "),i("p",[t._v("Place of origin: "+t._s(t.activeDetail.origin))]),t._v(" "),i("button",{staticClass:"btn btn-primary",staticStyle:{margin:"20px 0"},attrs:{type:"button"},on:{click:function(e){t.DetailsChangeQuantity()}}},[t._v("Add to Cart")])])])])]),t._v(" "),i("div",{staticClass:"modal fade",attrs:{id:"PaymentLinkForm",tabindex:"-1",role:"dialog"}},[i("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[i("div",{staticClass:"modal-content"},[i("div",{staticClass:"modal-body clearfloat"},[t._m(4),t._v(" "),i("h3",[t._v("Requested Payment")]),t._v(" "),i("h4",[i("span",{staticStyle:{color:"red"}},[t._v("Amount: "+t._s(t._f("FormatPrice")(t.Amount)))]),i("br"),t._v("\n                Payment Code:"),i("br")]),t._v(" "),i("div",{staticClass:"input-group"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.PaymentLink,expression:"PaymentLink"}],staticClass:"form-control request-amount",attrs:{id:"Paymentlink",readonly:"readonly",placeholder:"PaymentLink",type:"text"},domProps:{value:t.PaymentLink},on:{input:function(e){e.target.composing||(t.PaymentLink=e.target.value)}}}),t._v(" "),i("span",{staticClass:"input-group-btn"},[i("button",{staticClass:"btn btn-default btncopy",attrs:{"data-clipboard-target":"#Paymentlink",type:"button"},on:{click:t.copyfun}},[i("span",{staticClass:"glyphicon glyphicon-file",attrs:{"aria-hidden":"true"}}),t._v("Copy")])])]),t._v(" "),t._m(5),t._v(" "),i("div",{staticClass:"input-group"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.Peer,expression:"Peer"}],staticClass:"form-control request-amount",attrs:{id:"Peer",readonly:"readonly",placeholder:"PaymentLink",type:"text"},domProps:{value:t.Peer},on:{input:function(e){e.target.composing||(t.Peer=e.target.value)}}}),t._v(" "),i("span",{staticClass:"input-group-btn"},[i("button",{staticClass:"btn btn-default btncopy1",attrs:{"data-clipboard-target":"#Peer",type:"button"},on:{click:t.copyfun1}},[i("span",{staticClass:"glyphicon glyphicon-file",attrs:{"aria-hidden":"true"}}),t._v("Copy")])])]),t._v(" "),i("div",{staticClass:"alert alert-info clearfloat",attrs:{role:"alert"}},[i("qriously",{attrs:{value:t.PaymentLink,size:240}}),i("span",[t._v("Payment Code")]),i("br"),t._v(" ")],1),t._v(" "),i("div",{staticClass:"alert alert-info clearfloat",attrs:{role:"alert"}},[i("qriously",{attrs:{value:t.Peer,size:240}}),i("span",[t._v("TNAP")]),i("br"),t._v("(Trinity Network Access Point)")],1)])])])])])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"page-header text-left"},[e("h1",[this._v("Commodity List")])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("thead",[i("tr",[i("th",[t._v("No.")]),t._v(" "),i("th",[t._v("Commodity")]),t._v(" "),i("th",[t._v("Quantity")]),t._v(" "),i("th",[t._v("Amount")]),t._v(" "),i("th",[t._v("Edit")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"col-md-8 col-lg-7 col-xl-12",staticStyle:{display:"none"}},[e("input",{staticClass:"form-control",attrs:{type:"text",placeholder:"Description"}})])},function(){var t=this.$createElement,e=this._self._c||t;return e("button",{staticClass:"close closeDetails",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[e("span",{attrs:{"aria-hidden":"true"}},[this._v("×")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("button",{staticClass:"close closePaymentLink",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[e("span",{attrs:{"aria-hidden":"true"}},[this._v("×")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h4",[this._v("\n                TNAP(Trinity Network Access Point):"),e("br")])}]};var m={name:"App",data:()=>({title:"T Store"}),mounted:function(){this.$nextTick(function(){})},components:{headNav:c,index:i("VU/8")(d,u,!1,function(t){i("qQL1")},"data-v-a6a00ea0",null).exports},methods:{}},p={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("head-nav",{attrs:{title:this.title}}),this._v(" "),e("index",{attrs:{title:this.title}})],1)},staticRenderFns:[]};var v=i("VU/8")(m,p,!1,function(t){i("iNGD")},null,null).exports;a.a.config.productionTip=!1,new a.a({el:"#app",components:{App:v},template:"<App/>"})},iNGD:function(t,e){},qQL1:function(t,e){},yiKz:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.66200331444c5c1a6887.js.map